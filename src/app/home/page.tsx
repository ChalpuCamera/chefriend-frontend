"use client";

import { useState, useEffect, useRef } from "react";
import { useMyStores, useUpdateStore } from "@/lib/hooks/useStore";
import { CustomerView } from "@/components/customer-view";
import { LinkType, LinkItem } from "@/lib/types/api/store";
import { LinkSelectorDialog } from "@/components/link-selector-dialog";
import { Button } from "@/components/ui/button";
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogFooter,
} from "@/components/ui/dialog";
import { Plus, GripVertical, X, Save, Eye, Home, UtensilsCrossed } from "lucide-react";
import Image from "next/image";
import { toast } from "sonner";
import { useQueryClient } from "@tanstack/react-query";
import { storeKeys } from "@/lib/hooks/useStore";
import {
  DndContext,
  closestCenter,
  KeyboardSensor,
  PointerSensor,
  TouchSensor,
  useSensor,
  useSensors,
  DragEndEvent,
} from "@dnd-kit/core";
import {
  arrayMove,
  SortableContext,
  sortableKeyboardCoordinates,
  useSortable,
  verticalListSortingStrategy,
} from "@dnd-kit/sortable";
import { CSS } from "@dnd-kit/utilities";
import { useRouter } from "next/navigation";
import { photoApi } from "@/lib/api/owner/photo";
import { storeApi } from "@/lib/api/owner/store";

// ÌîåÎû´Ìèº Ï†ïÎ≥¥ Îß§Ìïë
const platformIcons: Record<LinkType, string> = {
  NAVER_MAP: "/platform_icons/naver.png",
  KAKAO_MAP: "/platform_icons/kakaomap.png",
  YOGIYO: "/platform_icons/yogiyo.png",
  BAEMIN: "/platform_icons/baemin.png",
  COUPANGEATS: "/platform_icons/coupangeats.png",
  KAKAO_TALK: "/platform_icons/kakaotalk.png",
  INSTAGRAM: "/platform_icons/instagram.png",
  DDANGYO: "/platform_icons/ddangyo.png",
  GOOGLE_MAPS: "/platform_icons/googlemaps.png",
  DAANGN: "/platform_icons/daangn.png",
  CUSTOM: "/platform_icons/link.png",
};

const platformNames: Record<LinkType, string> = {
  NAVER_MAP: "ÎÑ§Ïù¥Î≤Ñ ÏßÄÎèÑ",
  KAKAO_MAP: "Ïπ¥Ïπ¥Ïò§Îßµ",
  YOGIYO: "ÏöîÍ∏∞Ïöî",
  BAEMIN: "Î∞∞Îã¨ÏùòÎØºÏ°±",
  COUPANGEATS: "Ïø†Ìå°Ïù¥Ï∏†",
  KAKAO_TALK: "Ïπ¥Ïπ¥Ïò§ÌÜ°",
  INSTAGRAM: "Ïù∏Ïä§ÌÉÄÍ∑∏Îû®",
  DDANGYO: "Îï°Í≤®Ïöî",
  GOOGLE_MAPS: "Íµ¨Í∏ÄÎßµ",
  DAANGN: "ÎãπÍ∑ºÎßàÏºì",
  CUSTOM: "",
};

// Í∞úÎ≥Ñ Ï†ïÎ†¨ Í∞ÄÎä•Ìïú ÎßÅÌÅ¨ ÏïÑÏù¥ÌÖú
function SortableLinkItem({
  id,
  linkType,
  label,
  onRemove,
}: {
  id: number;
  linkType: LinkType;
  label?: string;
  onRemove: () => void;
}) {
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition,
    isDragging,
  } = useSortable({ id: String(id) });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition: isDragging ? transition : 'none',
    opacity: isDragging ? 0.5 : 1,
  };

  const displayLabel = label || platformNames[linkType];

  return (
    <div
      ref={setNodeRef}
      style={style}
      className="flex items-center gap-3 px-4 py-3 bg-white border border-gray-200 rounded-lg"
    >
      <button
        className="cursor-grab active:cursor-grabbing touch-none"
        {...attributes}
        {...listeners}
      >
        <GripVertical className="w-5 h-5 text-gray-400" />
      </button>
      <Image
        src={platformIcons[linkType]}
        alt={displayLabel}
        width={24}
        height={24}
        className="flex-shrink-0"
      />
      <span className="flex-1 font-medium">{displayLabel}</span>
      <button
        onClick={onRemove}
        className="text-red-500 hover:text-red-700 p-1"
      >
        <X className="w-5 h-5" />
      </button>
    </div>
  );
}

export default function HomePage() {
  const router = useRouter();
  const queryClient = useQueryClient();
  const [isSiteLinkDialogOpen, setIsSiteLinkDialogOpen] = useState(false);
  const [isProfileImageDialogOpen, setIsProfileImageDialogOpen] = useState(false);
  const [isUploadingImage, setIsUploadingImage] = useState(false);
  const fileInputRef = useRef<HTMLInputElement>(null);
  const [isLinkDialogOpen, setIsLinkDialogOpen] = useState(false);
  const [isPreviewDialogOpen, setIsPreviewDialogOpen] = useState(false);
  const [links, setLinks] = useState<LinkItem[]>([]);
  const [hasChanges, setHasChanges] = useState(false);

  // Get user's stores (Ï≤´ Î≤àÏß∏ Í∞ÄÍ≤å Ïö∞ÏÑ†)
  const { data: storesData } = useMyStores({ size: 10 });
  const stores = storesData?.content || [];

  console.log('üè™ Stores data:', stores);

  const currentStore =
    stores.length > 0
      ? stores.reduce((first, store) =>
          store.storeId < first.storeId ? store : first
        )
      : null;
  const storeId = currentStore?.storeId;

  console.log('üéØ Selected store:', currentStore);
  console.log('üîë Store ID:', storeId);

  const updateStoreMutation = useUpdateStore();

  // Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞Î°ú state Ï¥àÍ∏∞Ìôî
  useEffect(() => {
    if (currentStore?.links) {
      // Î∞±ÏóîÎìúÏùò labelÏùÑ customLabelÎ°ú Î≥ÄÌôò
      const convertedLinks = currentStore.links.map(link => {
        const converted: LinkItem = {
          linkType: link.linkType,
          url: link.url,
        };

        // CUSTOM ÌÉÄÏûÖÏù¥Í≥† labelÏù¥ ÏûàÏúºÎ©¥ customLabelÎ°ú Î≥ÄÌôò
        if (link.linkType === "CUSTOM" && link.label) {
          converted.customLabel = link.label;
        } else if (link.customLabel) {
          converted.customLabel = link.customLabel;
        }

        return converted;
      });

      setLinks(convertedLinks);
    }
  }, [currentStore]);

  // Drag and drop sensors (Î™®Î∞îÏùº ÌÑ∞Ïπò ÏßÄÏõê)
  const sensors = useSensors(
    useSensor(PointerSensor),
    useSensor(TouchSensor),
    useSensor(KeyboardSensor, {
      coordinateGetter: sortableKeyboardCoordinates,
    })
  );

  const handleDragEnd = (event: DragEndEvent) => {
    const { active, over } = event;

    if (over && active.id !== over.id) {
      setLinks((items) => {
        const oldIndex = Number(active.id);
        const newIndex = Number(over.id);
        const newOrder = arrayMove(items, oldIndex, newIndex);
        setHasChanges(true);
        return newOrder;
      });
    }
  };

  const handleLinkAdd = (linkItem: LinkItem) => {
    setLinks(prev => [...prev, linkItem]);
    setHasChanges(true);
  };

  const handleRemoveLink = (index: number) => {
    setLinks(prev => prev.filter((_, i) => i !== index));
    setHasChanges(true);
  };

  // ÏÇ¨Ïù¥Ìä∏ Ï£ºÏÜå Î≥µÏÇ¨
  const handleCopySiteLink = async () => {
    if (currentStore?.siteLink) {
      try {
        await navigator.clipboard.writeText(
          `https://chefriend.kr/${currentStore.siteLink}`
        );
        toast.success("ÏÇ¨Ïù¥Ìä∏ Ï£ºÏÜåÍ∞Ä Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!");
      } catch (error) {
        console.error("Failed to copy:", error);
        toast.error("Î≥µÏÇ¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.");
      }
    }
  };

  // ÏÇ¨Ïù¥Ìä∏ Î≥¥Í∏∞
  const handleViewSite = () => {
    if (currentStore?.siteLink) {
      window.open(`https://chefriend.kr/${currentStore.siteLink}`, "_blank");
    }
  };

  // ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú
  const handleProfileImageUpload = async (
    e: React.ChangeEvent<HTMLInputElement>
  ) => {
    const file = e.target.files?.[0];
    if (!file || !storeId) {
      console.log("No file or storeId:", { file: !!file, storeId });
      return;
    }

    setIsUploadingImage(true);
    try {
      console.log("Starting image upload for store:", storeId);

      // 1. Presigned URL ÏÉùÏÑ±
      const presignedResponse = await photoApi.getPresignedUrl(file.name);
      const { presignedUrl, s3Key } = presignedResponse.result;
      console.log("Got presigned URL, s3Key:", s3Key);

      // 2. S3Ïóê ÌååÏùº ÏóÖÎ°úÎìú
      await photoApi.uploadToS3(presignedUrl, file);
      console.log("Uploaded to S3");

      // 3. ÏÑúÎ≤ÑÏóê ÏÇ¨ÏßÑ Ï†ïÎ≥¥ Îì±Î°ù (foodItemId ÏóÜÏù¥)
      const registerResponse = await photoApi.registerPhoto({
        s3Key,
        fileName: file.name,
        fileSize: file.size,
      });

      const imageUrl = registerResponse.result.imageUrl;
      console.log("Registered photo, imageUrl:", imageUrl);

      // 4. Í∞ÄÍ≤å ÎåÄÌëú ÏÇ¨ÏßÑ ÏÑ§Ï†ï API Ìò∏Ï∂ú
      const updateResult = await storeApi.updateStoreThumbnail(
        storeId,
        imageUrl
      );
      console.log("Store thumbnail updated, result:", updateResult);

      // 5. Ï∫êÏãú Î¨¥Ìö®ÌôîÌïòÏó¨ UI ÏóÖÎç∞Ïù¥Ìä∏
      queryClient.invalidateQueries({ queryKey: storeKeys.detail(storeId) });
      queryClient.invalidateQueries({ queryKey: storeKeys.lists() });

      toast.success("ÎåÄÌëú ÏÇ¨ÏßÑÏù¥ Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§!");
      setIsProfileImageDialogOpen(false);
    } catch (error) {
      console.error("Profile image upload failed:", error);
      toast.error("ÏÇ¨ÏßÑ ÏóÖÎ°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.");
    } finally {
      setIsUploadingImage(false);
      if (fileInputRef.current) {
        fileInputRef.current.value = "";
      }
    }
  };

  const handleSettings = () => {
    router.push("/mypage");
  };

  const handleSave = async () => {
    console.log('handleSave called - storeId:', storeId, 'currentStore:', currentStore);

    if (!storeId || !currentStore) {
      console.error('Save failed: storeId or currentStore is missing');
      toast.error("Í∞ÄÍ≤å Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§");
      return;
    }

    console.log('Saving with payload:', {
      storeId,
      data: {
        storeName: currentStore.storeName,
        description: currentStore.description,
        siteLink: currentStore.siteLink,
        links: links,
      }
    });

    try {
      await updateStoreMutation.mutateAsync({
        storeId,
        data: {
          storeName: currentStore.storeName,
          address: currentStore.address,
          description: currentStore.description,
          siteLink: currentStore.siteLink,
          thumbnailUrl: currentStore.thumbnailUrl,
          requiredStampsForCoupon: currentStore.requiredStampsForCoupon,
          displayTemplate: currentStore.displayTemplate,
          links: links,  // Ï†ÑÏ≤¥ Î∞∞Ïó¥ Ï†ÑÏÜ°
        },
      });

      // Ï∫êÏãú Î¨¥Ìö®Ìôî
      queryClient.invalidateQueries({ queryKey: storeKeys.detail(storeId) });
      queryClient.invalidateQueries({ queryKey: storeKeys.lists() });

      toast.success("ÎßÅÌÅ¨Í∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!");
      setHasChanges(false);
    } catch (error) {
      console.error("Save failed:", error);
      toast.error("Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§");
    }
  };

  if (!currentStore) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <p>Í∞ÄÍ≤å Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
      </div>
    );
  }

  // CustomerViewÏóê Ï†ÑÎã¨Ìï† storeData ÏÉùÏÑ± (Ìé∏Ïßë Ï§ëÏù∏ Îç∞Ïù¥ÌÑ∞ Î∞òÏòÅ)
  const previewStoreData = {
    ...currentStore,
    links: links,
  };

  return (
    <div className="bg-white w-full mx-auto py-3 pb-24">
      {/* Header */}
      <div className="flex items-center justify-between px-4 h-full mb-3">
        <Image
          src="/logo_small.png"
          alt="Logo"
          width={88}
          height={27}
          quality={100}
          priority
          style={{ width: "auto", height: "auto" }}
        />
        <button className="" onClick={handleSettings}>
          <Image
            src="/setting_icon.png"
            alt="setting"
            width={20}
            height={20}
            quality={100}
          />
        </button>
      </div>

      {/* Store Profile Section */}
      <div className="px-4 py-5 mt-6 mb-5">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-3">
            {/* ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ - ÌÅ¥Î¶≠ÌïòÏó¨ ÎØ∏Î¶¨Î≥¥Í∏∞ */}
            <button
              onClick={() => setIsProfileImageDialogOpen(true)}
              className="flex items-center justify-center w-20 h-20 rounded-full bg-gray-200 overflow-hidden cursor-pointer hover:opacity-80 transition-opacity"
            >
              {currentStore?.thumbnailUrl ? (
                <Image
                  src={currentStore.thumbnailUrl}
                  alt="Profile"
                  width={80}
                  height={80}
                  className="w-full h-full object-cover"
                  quality={95}
                  sizes="64px"
                  unoptimized={currentStore.thumbnailUrl.startsWith("http")}
                />
              ) : (
                <Image
                  src="/store_icon.png"
                  alt="Profile"
                  width={80}
                  height={80}
                  quality={100}
                  priority
                  className="w-full h-full object-cover"
                />
              )}
            </button>
            <div className="flex flex-col gap-1">
              <h2 className="text-sub-title-b text-gray-800">
                {currentStore?.storeName || "Í∞ÄÍ≤å Ïù¥Î¶Ñ"}
              </h2>
              <p className="text-caption-r text-gray-800">
                {currentStore?.description && currentStore.description.length > 0 ? currentStore.description : "ÏïàÎÖïÌïòÏÑ∏Ïöî ÏÇ¨Ïû•Îãò üë®‚Äçüåæ"}
              </p>
              {/* ÏÇ¨Ïù¥Ìä∏ Ï£ºÏÜå - ÌÅ¥Î¶≠ÌïòÏó¨ Dialog Ïò§Ìîà */}
              {currentStore?.siteLink && (
                <button
                  onClick={() => setIsSiteLinkDialogOpen(true)}
                  className="text-body-r text-purple-700 flex items-center gap-1 hover:underline text-left"
                >
                  chefriend.kr/{currentStore.siteLink}üîó
                </button>
              )}
            </div>
          </div>
          {storeId && (
            <button
              onClick={() => router.push(`/store/${storeId}/edit`)}
              className="text-body-sb text-purple-700 px-3 py-2 min-w-[48px] min-h-[44px] flex items-center justify-center"
            >
              ÏàòÏ†ï
            </button>
          )}
        </div>
      </div>

      <div className="max-w-md mx-auto p-4 space-y-6">
        <div className="flex items-center justify-end gap-2">
          <Button
            onClick={() => setIsPreviewDialogOpen(true)}
            variant="outline"
            size="sm"
          >
            <Eye className="w-4 h-4 mr-2" />
            ÎØ∏Î¶¨Î≥¥Í∏∞
          </Button>
          <Button
            onClick={handleSave}
            disabled={!hasChanges || updateStoreMutation.isPending}
            className="bg-purple-700 hover:bg-purple-800"
          >
            <Save className="w-4 h-4 mr-2" />
            {updateStoreMutation.isPending ? "Ï†ÄÏû• Ï§ë..." : "Ï†ÄÏû•"}
          </Button>
        </div>

        {/* Ìé∏Ïßë ÏÑπÏÖò */}
        <div className="bg-white rounded-lg p-4 shadow-sm">
          <div className="flex items-center justify-between mb-4">
            <h2 className="text-base font-semibold">ÎßÅÌÅ¨ Î™©Î°ù</h2>
            <Button
              onClick={() => setIsLinkDialogOpen(true)}
              size="sm"
              className="bg-purple-700 hover:bg-purple-800"
            >
              <Plus className="w-4 h-4 mr-1" />
              ÎßÅÌÅ¨ Ï∂îÍ∞Ä
            </Button>
          </div>

          {links.length === 0 ? (
            <div className="text-center py-8 text-gray-500">
              <p>ÏïÑÏßÅ ÎßÅÌÅ¨Í∞Ä ÏóÜÏäµÎãàÎã§</p>
              <p className="text-sm mt-2">ÎßÅÌÅ¨ Ï∂îÍ∞Ä Î≤ÑÌäºÏùÑ ÎàåÎü¨ ÏãúÏûëÌïòÏÑ∏Ïöî</p>
            </div>
          ) : (
            <DndContext
              sensors={sensors}
              collisionDetection={closestCenter}
              onDragEnd={handleDragEnd}
            >
              <SortableContext
                items={links.map((_, index) => String(index))}
                strategy={verticalListSortingStrategy}
              >
                <div className="space-y-2">
                  {links.map((link, index) => (
                    <SortableLinkItem
                      key={index}
                      id={index}
                      linkType={link.linkType}
                      label={link.label || link.customLabel}
                      onRemove={() => handleRemoveLink(index)}
                    />
                  ))}
                </div>
              </SortableContext>
            </DndContext>
          )}
        </div>
      </div>

      {/* ÎßÅÌÅ¨ Ï∂îÍ∞Ä Îã§Ïù¥ÏñºÎ°úÍ∑∏ */}
      <LinkSelectorDialog
        open={isLinkDialogOpen}
        onOpenChange={setIsLinkDialogOpen}
        existingLinks={links}
        onLinkAdd={handleLinkAdd}
      />

      {/* ÎØ∏Î¶¨Î≥¥Í∏∞ Îã§Ïù¥ÏñºÎ°úÍ∑∏ */}
      <Dialog open={isPreviewDialogOpen} onOpenChange={setIsPreviewDialogOpen}>
        <DialogContent className="max-w-[400px] p-0 gap-0">
          <DialogHeader className="px-6 pt-6 pb-4">
            <DialogTitle>ÏÜêÎãòÏù¥ Î≥¥Îäî ÌôîÎ©¥</DialogTitle>
          </DialogHeader>
          <div className="overflow-auto max-h-[70vh]">
            <CustomerView storeData={previewStoreData} />
          </div>
        </DialogContent>
      </Dialog>

      {/* ÏÇ¨Ïù¥Ìä∏ Ï£ºÏÜå Dialog */}
      <Dialog
        open={isSiteLinkDialogOpen}
        onOpenChange={setIsSiteLinkDialogOpen}
      >
        <DialogContent className="max-w-[360px]">
          <DialogHeader>
            <DialogTitle className="text-title-2 text-gray-800">
              Ïö∞Î¶¨ Í∞ÄÍ≤å ÏÇ¨Ïù¥Ìä∏ Ï£ºÏÜå
            </DialogTitle>
          </DialogHeader>
          <div className="space-y-4">
            <div className="bg-gray-100 rounded-lg p-4">
              <p className="text-body-r text-gray-800 break-all">
                chefriend.kr/{currentStore?.siteLink}
              </p>
            </div>
            <DialogFooter className="flex gap-2 sm:justify-center">
              <Button
                onClick={handleCopySiteLink}
                className="flex-1 bg-gray-200 text-gray-800 hover:bg-gray-300"
              >
                Î≥µÏÇ¨ÌïòÍ∏∞
              </Button>
              <Button
                onClick={handleViewSite}
                className="flex-1 bg-purple-700 text-white hover:bg-purple-800"
              >
                ÏÇ¨Ïù¥Ìä∏ Î≥¥Í∏∞
              </Button>
            </DialogFooter>
          </div>
        </DialogContent>
      </Dialog>

      {/* ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ ÎØ∏Î¶¨Î≥¥Í∏∞ Dialog */}
      <Dialog
        open={isProfileImageDialogOpen}
        onOpenChange={setIsProfileImageDialogOpen}
      >
        <DialogContent className="max-w-[400px]">
          <DialogHeader>
            <DialogTitle className="text-title-2 text-gray-800">
              ÎåÄÌëú ÏÇ¨ÏßÑ
            </DialogTitle>
          </DialogHeader>
          <div className="space-y-4">
            {/* Ïù¥ÎØ∏ÏßÄ ÎØ∏Î¶¨Î≥¥Í∏∞ - cdnÏóêÏÑú Í∞ÄÏ†∏Ïò§Îäî Ïù¥ÎØ∏ÏßÄÎäî ÏµúÏ†ÅÌôî Î∂àÌïÑÏöî*/}
            <div className="w-full aspect-square rounded-lg overflow-hidden bg-gray-100">
              {currentStore?.thumbnailUrl ? (
                // eslint-disable-next-line @next/next/no-img-element
                <img
                  src={currentStore.thumbnailUrl}
                  alt="ÎåÄÌëú ÏÇ¨ÏßÑ"
                  className="w-full h-full object-cover"
                />
              ) : (
                <Image
                  src="/store_icon.png"
                  alt="ÎåÄÌëú ÏÇ¨ÏßÑ"
                  width={400}
                  height={400}
                  className="w-full h-full object-cover"
                  quality={100}
                  priority
                />
              )}
            </div>
            {/* ÌûàÎì† ÌååÏùº input */}
            <input
              ref={fileInputRef}
              type="file"
              accept="image/*"
              onChange={handleProfileImageUpload}
              className="hidden"
            />
            <DialogFooter className="flex gap-2 sm:justify-center">
              <Button
                onClick={() => fileInputRef.current?.click()}
                disabled={isUploadingImage}
                className="flex-1 bg-purple-700 text-white hover:bg-purple-800"
              >
                {isUploadingImage ? "ÏóÖÎ°úÎìú Ï§ë..." : "ÏÇ¨ÏßÑ Î≥ÄÍ≤ΩÌïòÍ∏∞"}
              </Button>
              <Button
                onClick={() => setIsProfileImageDialogOpen(false)}
                className="flex-1 bg-gray-200 text-gray-800 hover:bg-gray-300"
              >
                Îã´Í∏∞
              </Button>
            </DialogFooter>
          </div>
        </DialogContent>
      </Dialog>

      {/* ÌîåÎ°úÌåÖ ÌÉ≠ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò */}
      <div className="fixed bottom-6 left-0 right-0 z-50 px-4">
        <div className="max-w-md mx-auto">
          <div className="bg-white rounded-full shadow-2xl border border-gray-200 flex overflow-hidden">
            {/* ÌôàÌéòÏù¥ÏßÄ Í¥ÄÎ¶¨ ÌÉ≠ */}
            <button
              onClick={() => {/* ÌòÑÏû¨ ÌéòÏù¥ÏßÄÏù¥ÎØÄÎ°ú ÏïÑÎ¨¥ ÎèôÏûë ÏïàÌï® */}}
              className="flex-1 flex flex-col items-center justify-center py-4 px-4 bg-purple-700 text-white transition-all"
            >
              <Home className="w-5 h-5 mb-1" />
              <span className="text-xs font-medium">ÌôàÌéòÏù¥ÏßÄ Í¥ÄÎ¶¨</span>
            </button>

            {/* Î©îÎâ¥ Í¥ÄÎ¶¨ ÌÉ≠ */}
            <button
              onClick={() => router.push('/menu')}
              className="flex-1 flex flex-col items-center justify-center py-4 px-4 text-gray-600 hover:bg-gray-50 transition-all"
            >
              <UtensilsCrossed className="w-5 h-5 mb-1" />
              <span className="text-xs font-medium">Î©îÎâ¥ Í¥ÄÎ¶¨</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}
